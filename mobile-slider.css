/* ============================================
   WINDOWS FLIP 3D SLIDER - Mobile Only
   Single page with 3D flip effect (Windows 7 Win+Tab style)
   ============================================ */

/* Hide slider elements by default on desktop */
.slider-dots {
    display: none;
}

.slider-container {
    display: none;
}

.flip3d-controls {
    display: none;
}

/* Windows Flip 3D style for mobile */
@media (max-width: 768px) {
    /* Hide the original grid and show flip3d container */
    .options-grid {
        display: none !important;
    }
    
    .slider-container {
        display: block;
        width: 100%;
        max-width: min(95vw, 900px);
        height: auto;
        min-height: min(45vh, 350px);
        position: relative;
        margin: 0 auto;
        perspective: 2000px;
        overflow: visible;
        touch-action: pan-y;
    }
    
    /* Windows Flip 3D container */
    .flip3d-container {
        width: 100%;
        height: 100%;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        transform: translateZ(-300px) rotateY(0deg);
    }
    
    /* Single scene for all cards - Windows 7 Win+Tab style */
    .flip3d-scene {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        pointer-events: none;
    }
    
    /* Windows Flip 3D cards - all visible at once */
    .flip3d-card {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 70%;
        max-width: 220px;
        padding-bottom: 70%;
        transform-style: preserve-3d;
        transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        pointer-events: all;
        cursor: pointer;
        filter: brightness(0.95);
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 
            0 15px 35px rgba(0, 0, 0, 0.2),
            0 5px 15px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }
    
    /* Card 1: Center (front-most) */
    .flip3d-card[data-index="0"] {
        transform: translate(-50%, -50%) translateZ(50px) rotateY(0deg) scale(1);
        z-index: 30;
        filter: brightness(1);
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.25),
            0 10px 20px rgba(0, 0, 0, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Card 2: Right side */
    .flip3d-card[data-index="1"] {
        transform: translate(-50%, -50%) translateZ(-50px) rotateY(45deg) scale(0.85);
        z-index: 20;
        opacity: 0.9;
    }
    
    /* Card 3: Left side */
    .flip3d-card[data-index="2"] {
        transform: translate(-50%, -50%) translateZ(-100px) rotateY(-45deg) scale(0.85);
        z-index: 10;
        opacity: 0.9;
    }
    
    /* Active card styling */
    .flip3d-card.active {
        filter: brightness(1.05);
        transform: translate(-50%, -50%) translateZ(80px) rotateY(0deg) scale(1) !important;
        z-index: 40 !important;
        box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.3),
            0 15px 30px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }
    
    /* Windows Flip 3D effect on click */
    .flip3d-card:active {
        transform: translate(-50%, -50%) translateZ(30px) scale(0.95) !important;
        transition: transform 0.2s ease;
    }
    
    /* Content inside the card */
    .flip3d-card .option-circle {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 50%;
        padding: 15%;
        transform: translateZ(0);
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
    }
    
    /* Windows Aero Glass effect */
    .flip3d-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.2) 0%,
            rgba(255, 255, 255, 0.1) 25%,
            rgba(255, 255, 255, 0) 50%,
            rgba(0, 0, 0, 0.1) 75%,
            rgba(0, 0, 0, 0.2) 100%
        );
        border-radius: 50%;
        pointer-events: none;
        z-index: 1;
    }
    
    /* Reflection effect */
    .flip3d-card::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 40%;
        background: linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.3) 0%,
            rgba(255, 255, 255, 0.1) 30%,
            transparent 100%
        );
        border-radius: 50% 50% 0 0;
        pointer-events: none;
        z-index: 1;
    }
    
    /* Navigation dots - Windows Taskbar style */
    .slider-dots {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 16px;
        margin-top: 30px;
        padding: 12px;
        height: 24px;
        position: relative;
        z-index: 100;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        max-width: 180px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: rgba(44, 62, 80, 0.3);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 2px solid transparent;
        position: relative;
    }
    
    .dot.active {
        background-color: #2c3e50;
        transform: scale(1.3);
        border-color: #1a252f;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }
    
    .dot:hover {
        background-color: #34495e;
        transform: scale(1.1);
    }
    
    /* Windows Flip 3D Controls (Keyboard arrow style) */
    .flip3d-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        transform: translateY(-50%);
        pointer-events: none;
        z-index: 50;
        padding: 0 10px;
    }
    
    .flip3d-btn {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid #2c3e50;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        pointer-events: all;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: bold;
        user-select: none;
        backdrop-filter: blur(5px);
    }
    
    .flip3d-btn:hover {
        background: #2c3e50;
        color: white;
        transform: scale(1.1);
    }
    
    .flip3d-btn:active {
        transform: scale(0.95);
    }
    
    .flip3d-btn.prev::before {
        content: '‹';
    }
    
    .flip3d-btn.next::before {
        content: '›';
    }
    
    /* Windows Flip animation */
    @keyframes windowsFlip {
        0% {
            transform: translate(-50%, -50%) translateZ(-100px) rotateY(0deg) scale(0.9);
            opacity: 0.7;
        }
        50% {
            transform: translate(-50%, -50%) translateZ(100px) rotateY(90deg) scale(1);
            opacity: 0.9;
        }
        100% {
            transform: translate(-50%, -50%) translateZ(50px) rotateY(0deg) scale(1);
            opacity: 1;
        }
    }
    
    .flip3d-card.flip-animation {
        animation: windowsFlip 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    
    /* Instruction text */
    .flip-instruction {
        text-align: center;
        color: #666;
        font-size: 0.8rem;
        margin-top: 15px;
        opacity: 0.8;
        font-style: italic;
        display: none;
    }
    
    /* Selection indicator */
    .selection-indicator {
        position: absolute;
        bottom: -20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.7rem;
        color: #2c3e50;
        background: rgba(255, 255, 255, 0.9);
        padding: 4px 12px;
        border-radius: 12px;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
        z-index: 100;
        backdrop-filter: blur(5px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .selection-indicator.show {
        opacity: 1;
    }
    
    /* Keyboard shortcuts hint */
    .keyboard-hint {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.65rem;
        color: #999;
        text-align: center;
        display: none;
    }
}

/* Adjustments for very small screens */
@media (max-width: 480px) {
    .slider-container {
        min-height: min(40vh, 320px);
        perspective: 1500px;
    }
    
    .flip3d-card {
        width: 65%;
        max-width: 200px;
        padding-bottom: 65%;
    }
    
    .flip3d-card[data-index="1"] {
        transform: translate(-50%, -50%) translateZ(-40px) rotateY(50deg) scale(0.8);
    }
    
    .flip3d-card[data-index="2"] {
        transform: translate(-50%, -50%) translateZ(-80px) rotateY(-50deg) scale(0.8);
    }
    
    .flip3d-card.active {
        transform: translate(-50%, -50%) translateZ(60px) rotateY(0deg) scale(1) !important;
    }
    
    .slider-dots {
        margin-top: 25px;
        gap: 14px;
        padding: 10px;
        max-width: 160px;
    }
    
    .dot {
        width: 10px;
        height: 10px;
    }
    
    .flip-instruction {
        display: block;
    }
}

/* Landscape mode on mobile */
@media (orientation: landscape) and (max-width: 768px) {
    .slider-container {
        min-height: min(50vh, 250px);
        perspective: 2500px;
    }
    
    .flip3d-card {
        width: 50%;
        padding-bottom: 50%;
        max-width: 180px;
    }
    
    .flip3d-card[data-index="1"] {
        transform: translate(-50%, -50%) translateZ(-30px) rotateY(60deg) scale(0.8);
    }
    
    .flip3d-card[data-index="2"] {
        transform: translate(-50%, -50%) translateZ(-60px) rotateY(-60deg) scale(0.8);
    }
    
    .flip3d-card.active {
        transform: translate(-50%, -50%) translateZ(40px) rotateY(0deg) scale(1) !important;
    }
    
    .slider-dots {
        margin-top: 20px;
    }
    
    .flip3d-controls {
        padding: 0 20px;
    }
    
    .flip3d-btn {
        width: 40px;
        height: 40px;
        font-size: 1.3rem;
    }
}

/* Tablet screens */
@media (min-width: 481px) and (max-width: 768px) {
    .flip3d-card {
        width: 60%;
        max-width: 240px;
        padding-bottom: 60%;
    }
    
    .flip3d-card[data-index="1"] {
        transform: translate(-50%, -50%) translateZ(-60px) rotateY(40deg) scale(0.9);
    }
    
    .flip3d-card[data-index="2"] {
        transform: translate(-50%, -50%) translateZ(-120px) rotateY(-40deg) scale(0.9);
    }
    
    .keyboard-hint {
        display: block;
    }
}

/* Smooth transitions for orientation changes */
@media (prefers-reduced-motion: no-preference) {
    .flip3d-container,
    .flip3d-card,
    .dot {
        transition-duration: 0.6s;
    }
}

/* High-performance optimizations */
.flip3d-container,
.flip3d-card,
.flip3d-btn {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
    .flip3d-container,
    .flip3d-card,
    .dot,
    .flip3d-btn {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
    }
}

/* Windows 7-style depth effect */
.flip3d-card .option-circle {
    background: linear-gradient(
        145deg,
        var(--card-color, #2c3e50) 0%,
        color-mix(in srgb, var(--card-color, #2c3e50) 80%, black) 100%
    );
}

/* Card-specific colors */
.flip3d-card[data-index="0"] .option-circle {
    --card-color: #2c3e50;
}

.flip3d-card[data-index="1"] .option-circle {
    --card-color: #34495e;
}

.flip3d-card[data-index="2"] .option-circle {
    --card-color: #2c3e50;
}

/* Active state glow */
.flip3d-card.active .option-circle {
    box-shadow: 
        inset 0 0 20px rgba(255, 255, 255, 0.2),
        0 0 30px rgba(59, 130, 246, 0.3);
}
